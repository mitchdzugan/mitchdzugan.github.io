(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(21)},16:function(e,t,a){},18:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(2),r=a.n(o),c=(a(16),a(6)),i=a(9),l=a(3),d=a(4),m=a(7),u=a(5),h=a(8),p=(a(18),a(19),window.firebase);p.initializeApp({apiKey:"AIzaSyBIwH-TaElo0hGA5z5m38dv_gNgf4DSWsM",authDomain:"sls-secretsanta.firebaseapp.com",projectId:"sls-secretsanta"});var g=p.firestore();g.settings({timestampsInSnapshots:!0});var f=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyz0123456789",a=0;a<13;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},y=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(m.a)(this,Object(u.a)(t).call(this,e));var n=window.localStorage.getItem("sls-code")||f();return window.localStorage.setItem("sls-code",n),a.state={slsCode:n},g.collection("Codes").doc(n).onSnapshot(function(e){e.data()?a.setState({code:e.data()}):g.collection("Codes").doc(n).set({slsCode:n})}),a.unsubYou=function(){},a.unsubTo=function(){},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,s=t.code&&t.code.personId,o=n.code&&n.code.personId,r=t.code&&t.code.toId,c=n.code&&n.code.toId;o!==s&&(this.unsubYou(),this.unsubYou=g.collection("People").doc(o).onSnapshot(function(e){a.setState({you:e.data()})})),c!==r&&(this.unsubTo(),this.unsubTo=g.collection("People").doc(c).onSnapshot(function(e){a.setState({to:e.data()})}))}},{key:"renderContent",value:function(){if(!this.state.code)return s.a.createElement("div",{style:{display:"flex",textAlign:"center",flexDirection:"column",margin:"auto"}},s.a.createElement("img",{className:"loader",width:"100px",height:"100px",style:{margin:"auto"},src:"https://cdn3.iconfinder.com/data/icons/christmas-flatroom/512/santa_claus_old_beard_costume-512.png"}),s.a.createElement("span",null," loading... "));if(!this.state.code.personId)return s.a.createElement("span",null,"The North Pole Postal Service is running behind, please send ",s.a.createElement("strong",null,"@mitchdzugan")," this code: ",s.a.createElement("strong",null,this.state.code.slsCode)," to receive your letter to Santa.");if(!this.state.you||!this.state.to)return s.a.createElement("div",{style:{display:"flex",textAlign:"center",flexDirection:"column",margin:"auto"}},s.a.createElement("img",{className:"loader",width:"100px",height:"100px",style:{margin:"auto"},src:"https://cdn3.iconfinder.com/data/icons/christmas-flatroom/512/santa_claus_old_beard_costume-512.png"}),s.a.createElement("span",null," loading... "));var e=this.state.to,t=e.Address,a=e.Name,n=e.Wishes;return s.a.createElement("div",null,s.a.createElement("p",null,"Dear Santa ",s.a.createElement("strong",null,this.state.you.Name),","),s.a.createElement("p",{style:{marginLeft:"20px"}},"My name is ",s.a.createElement("strong",null,a),", this year I tried to wfh as little as possible and only raged at leads when I was really triggered so I think I deserve to be on the nice list. If you agree please get me something from this list:"),s.a.createElement("p",{style:{marginLeft:"20px"}},n),s.a.createElement("p",{style:{marginLeft:"20px"}},"My chimney is currently out of order so you can just send my gift to ",s.a.createElement("strong",null,t)),s.a.createElement("p",{style:{marginTop:"40px"}},"-Merry Christmas, ",a))}},{key:"renderChat",value:function(e,t,a,n){var o=this,r=e.messages||[],l=r.length?r.map(function(e,t){var n=e.from,o=e.body;return s.a.createElement("div",{key:t,className:"message ".concat(n===a?"fromMe":"fromOther")},s.a.createElement("div",{className:"messageSpacer"}),s.a.createElement("div",{className:"messageBody"},o))}):s.a.createElement("div",{className:"emptyMessages"},"no messages"),d=function(){var n={from:a,body:o[t].value};g.collection("People").doc(t).set(Object(i.a)({},e,{messages:[].concat(Object(c.a)(r),[n])})).then(function(){o[t].value=""})};return s.a.createElement("div",{className:"chat"},s.a.createElement("div",{className:"header"},"Chat with ",s.a.createElement("strong",null,n||e.Name)),s.a.createElement("div",{className:"messages"},l),s.a.createElement("div",{className:"input"},s.a.createElement("input",{onKeyDown:function(e){13===e.keyCode&&d()},ref:function(e){o[t]=e}}),s.a.createElement("button",{onClick:d},"send")))}},{key:"render",value:function(){var e=this.state.to&&this.state.you;return s.a.createElement("div",null,s.a.createElement("div",{className:"letter"},this.renderContent()),e&&s.a.createElement("div",{className:"chatsHolder"},this.renderChat(this.state.to,this.state.code.toId,this.state.code.personId),this.renderChat(this.state.you,this.state.code.personId,this.state.code.personId,"your santa")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.a345ebfc.chunk.js.map